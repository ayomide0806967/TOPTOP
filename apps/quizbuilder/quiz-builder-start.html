<!doctype html>
<html lang="en">
  <head>
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Get Started · Quiz Builder</title>
    <link rel="stylesheet" href="./assets/tailwind.css" />
    <link rel="stylesheet" href="../shared/design-system.css" />
  </head>
  <body class="min-h-screen bg-brand-light text-slate-900">
    <script>
      // Supabase client config for any serverless calls on this page
      window.__SUPABASE_CONFIG__ = window.__SUPABASE_CONFIG__ || {
        url: 'https://ghnhfagydcynhkgbazbj.supabase.co',
        anonKey:
          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdobmhmYWd5ZGN5bmhrZ2JhemJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwMDM2MjQsImV4cCI6MjA3NDU3OTYyNH0.KHgZ_ESTneR0CqWBGfu-JOmI3eBBLCZr1XG-g2vpclw',
      };
      // Derive Supabase Functions base for GitHub Pages hosting
      (function(){
        if (!window.__API_BASE__ && window.__SUPABASE_CONFIG__?.url) {
          try {
            window.__API_BASE__ = window.__SUPABASE_CONFIG__.url.replace('.supabase.co', '.functions.supabase.co');
          } catch(_) {}
        }
      })();
    </script>

    <div class="mx-auto w-full max-w-4xl px-4 py-10 sm:px-6 min-h-screen flex flex-col" id="qb-steps">
      <!-- Header -->
      <header class="mb-8 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <img src="./assets/academicnightingale-logo.jpg" alt="Academic Nightingale" class="h-10 w-10 rounded-lg object-cover" />
          <div>
            <h1 class="text-xl font-bold">Quiz Builder</h1>
            <p class="text-xs text-slate-600">Create quizzes • Manage seats • Monitor progress</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <span data-step-dot="1" class="h-2.5 w-2.5 rounded-full bg-cyan-600"></span>
          <span data-step-dot="2" class="h-2.5 w-2.5 rounded-full bg-slate-200"></span>
          <span data-step-dot="3" class="h-2.5 w-2.5 rounded-full bg-slate-200"></span>
        </div>
      </header>

      <!-- Step 1: Overview (two-column to fill space) -->
      <section data-step="1" class="flex-1">
        <div class="grid grid-cols-12 gap-6">
          <div class="col-span-12 lg:col-span-8">
            <div class="card h-full">
              <h2 class="text-lg font-semibold text-slate-900">What you can do</h2>
              <ul class="mt-3 grid gap-3 sm:grid-cols-2">
                <li class="flex items-start gap-3 text-sm text-slate-700"><span class="mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-cyan-100 text-cyan-700">✓</span> Build and publish graded quizzes in minutes</li>
                <li class="flex items-start gap-3 text-sm text-slate-700"><span class="mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-cyan-100 text-cyan-700">✓</span> Manage classrooms with seat limits and PIN access</li>
                <li class="flex items-start gap-3 text-sm text-slate-700"><span class="mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-cyan-100 text-cyan-700">✓</span> Live progress, attempts, and exam analytics</li>
                <li class="flex items-start gap-3 text-sm text-slate-700"><span class="mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-full bg-cyan-100 text-cyan-700">✓</span> Free tier included; upgrade seats any time</li>
              </ul>
              <div class="mt-6"><button id="qb-next-overview" class="btn btn-primary">Get Started</button></div>
            </div>
          </div>
          <aside class="col-span-12 lg:col-span-4 space-y-4">
            <div class="card p-4">
              <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Highlights</p>
              <div class="mt-3 space-y-3">
                <div class="card-body p-3">
                  <p class="text-sm font-medium text-slate-900">Seat-based classrooms</p>
                  <p class="text-xs text-slate-600">Control participant limits and join PINs.</p>
                </div>
                <div class="card-body p-3">
                  <p class="text-sm font-medium text-slate-900">Real-time monitoring</p>
                  <p class="text-xs text-slate-600">Live status, attempts and completion.</p>
                </div>
                <div class="card-body p-3">
                  <p class="text-sm font-medium text-slate-900">Export & review</p>
                  <p class="text-xs text-slate-600">Share results and review answers with context.</p>
                </div>
              </div>
            </div>
            <div class="card p-4">
              <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Why Quiz Builder?</p>
              <ul class="mt-2 space-y-2 text-sm text-slate-700">
                <li>• Simple authoring for instructors</li>
                <li>• Clean experience for students</li>
                <li>• Tenant‑ready; each school has its own space</li>
              </ul>
            </div>
          </aside>
        </div>
      </section>

      <!-- Step 2: Choose plan (two-column to fill space) -->
      <section data-step="2" class="hidden flex-1">
        <div class="grid grid-cols-12 gap-6 w-full">
          <div class="col-span-12 lg:col-span-8">
            <div class="card h-full">
              <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-slate-900">Choose your plan</h2>
                <button id="qb-back-from-plan" class="text-sm text-slate-600 hover:text-slate-900">Back</button>
              </div>
              <div class="mt-4 grid gap-4 sm:grid-cols-2">
                <div class="rounded-xl border border-slate-200 p-5">
                  <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold">Free</h3>
                    <span class="rounded-full bg-emerald-100 px-2.5 py-0.5 text-xs font-medium text-emerald-700">No cost</span>
                  </div>
                  <p class="mt-1 text-sm text-slate-600">Up to <strong>5 participants</strong> included.</p>
                  <button id="qb-choose-free" class="mt-4 inline-flex w-full items-center justify-center rounded-lg bg-cyan-600 px-4 py-2 text-sm font-semibold text-white hover:bg-cyan-700">Continue with Free</button>
                </div>
                <div class="rounded-xl border border-slate-200 p-5">
                  <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold">Paid</h3>
                    <span class="rounded-full bg-cyan-100 px-2.5 py-0.5 text-xs font-medium text-cyan-700">Per seat</span>
                  </div>
                  <p class="mt-1 text-sm text-slate-600">Enter the <strong>number of participants</strong>.</p>
                  <label for="qb-paid-seats" class="mt-3 block text-sm font-medium text-slate-700">Participants</label>
                  <input id="qb-paid-seats" type="number" min="1" inputmode="numeric" class="mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-400" placeholder="e.g. 30" />
                  <button id="qb-choose-paid" class="mt-4 inline-flex w-full items-center justify-center rounded-lg bg-cyan-600 px-4 py-2 text-sm font-semibold text-white hover:bg-cyan-700">Continue</button>
                  <p class="mt-2 text-xs text-slate-500">Payment is secure; billing prorates for the days left in the cycle.</p>
                </div>
              </div>
            </div>
          </div>
          <aside class="col-span-12 lg:col-span-4 space-y-4">
            <div class="rounded-xl border brand-brown-border bg-white p-4 shadow-sm">
              <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">What’s included</p>
              <ul class="mt-2 space-y-2 text-sm text-slate-700">
                <li>• Quiz builder, classrooms, live monitoring</li>
                <li>• Shareable links and exam scheduling</li>
                <li>• CSV exports and answer review</li>
              </ul>
            </div>
            <div class="rounded-xl border brand-brown-border bg-white p-4 shadow-sm">
              <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Tips</p>
              <p class="mt-1 text-xs text-slate-600">Start on Free to test flows. Upgrade seats only when you’re ready to invite your class.</p>
            </div>
          </aside>
        </div>
      </section>

      <!-- Step 3: Confirm & continue -->
      <section data-step="3" class="hidden flex-1">
        <div class="grid grid-cols-12 gap-6 w-full">
          <div class="col-span-12 lg:col-span-8">
            <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm h-full">
              <h2 class="text-lg font-semibold text-slate-900">Confirm your account</h2>
              <p class="mt-1 text-sm text-slate-600">Quiz Builder uses your existing Academic Nightingale sign‑in. If you’re not signed in yet, open the Learner login, then return and continue.</p>
              <div class="mt-4">
                <a href="../learner/login.html" class="inline-flex items-center gap-2 rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50">Open Learner Login</a>
              </div>
              <div class="mt-6 flex items-center justify-between">
                <p class="text-xs text-slate-500">Your session will be detected automatically.</p>
                <button id="qb-finish" class="inline-flex items-center rounded-lg bg-cyan-600 px-4 py-2 text-sm font-semibold text-white hover:bg-cyan-700">Continue</button>
              </div>
            </div>
          </div>
          <aside class="col-span-12 lg:col-span-4 space-y-4">
            <div class="rounded-xl border brand-brown-border bg-white p-4 shadow-sm">
              <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Privacy & security</p>
              <ul class="mt-2 space-y-2 text-sm text-slate-700">
                <li>• Sign in to protect your workspace</li>
                <li>• Tenant isolation by design</li>
                <li>• You control seats and access</li>
              </ul>
            </div>
            <div class="rounded-xl border brand-brown-border bg-white p-4 shadow-sm">
              <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Need help?</p>
              <p class="mt-1 text-xs text-slate-600">Questions about plans or billing? Contact support and we’ll help you pick the right option.</p>
            </div>
          </aside>
        </div>
      </section>

      <div id="info" class="hidden rounded-xl border border-slate-200 bg-emerald-50 p-4 text-sm text-emerald-800"></div>
      <div id="error" class="hidden rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-700"></div>
    </div>

    <script type="module" src="./src/quizBuilderStart.js"></script>
    <script type="module" src="./src/pwa-bootstrap.js"></script>
  </body>
  </html>
