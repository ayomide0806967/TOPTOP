<!doctype html>
<html lang="en">
  <head>
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learner Dashboard | Academic Nightingale</title>
    <link rel="stylesheet" href="../assets/tailwind.css" />
    <style>
      :root {
        color-scheme: light;
      }

      body {
        font-family: 'Inter', 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
        background-color: #f6f8fb;
        color: #0f172a;
      }

      .nav-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 0.875rem;
        color: #0f172a;
        transition: all 0.18s ease;
        flex: 1;
        min-width: 0;
        white-space: nowrap;
        position: relative;
        overflow: hidden;
      }

      .nav-button svg {
        width: 1.25rem;
        height: 1.25rem;
        color: inherit;
        flex-shrink: 0;
      }

      .nav-button span {
        font-size: 0.875rem;
        line-height: 1.2;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .nav-button:hover {
        background: rgba(8, 145, 178, 0.12);
        color: #036581;
        transform: translateY(-1px);
      }

      .nav-button--active {
        background: linear-gradient(135deg, #0f9ac7, #0ea5b8);
        color: #ffffff;
        box-shadow: 0 4px 12px -2px rgba(6, 148, 168, 0.4);
        transform: translateY(-1px);
      }

      .nav-button--active svg {
        color: #ffffff;
      }

      .nav-button[disabled] {
        opacity: 0.45;
        cursor: not-allowed;
        transform: none;
      }

      .nav-button[disabled]:hover {
        transform: none;
        background: transparent;
        color: #0f172a;
      }

      .card {
        background: rgba(255, 255, 255, 0.94);
        border-radius: 1.5rem;
        border: 1px solid rgba(148, 163, 184, 0.18);
        box-shadow: 0 24px 60px -40px rgba(15, 23, 42, 0.45);
      }

      .stat-chip {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        border-radius: 9999px;
        border: 1px solid rgba(8, 145, 178, 0.35);
        background: rgba(8, 145, 178, 0.12);
        padding: 0.35rem 0.9rem;
        font-size: 0.75rem;
        font-weight: 600;
        color: #036581;
        letter-spacing: 0.05em;
        text-transform: uppercase;
      }

      /* Bottom navigation bar specific styles */
      .fixed.bottom-0 {
        box-shadow: 0 -4px 20px -4px rgba(0, 0, 0, 0.1);
      }

      /* Mobile-first button bar styles */
      @media (max-width: 767px) {
        [data-role="nav-buttons"] {
          grid-template-columns: repeat(4, 1fr);
          gap: 0.125rem;
          padding: 0.25rem;
          max-width: 100%;
          margin: 0 auto;
        }

        .nav-button {
          padding: 0.625rem 0.25rem;
          font-size: 0.625rem;
          flex-direction: column;
          gap: 0.25rem;
          min-height: 3.5rem;
          border-radius: 0.5rem;
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(10px);
        }

        .nav-button svg {
          width: 1.125rem;
          height: 1.125rem;
        }

        .nav-button span {
          font-size: 0.625rem;
          line-height: 1;
          font-weight: 500;
        }

        .nav-button:hover {
          background: rgba(8, 145, 178, 0.15);
        }

        .nav-button--active {
          background: linear-gradient(135deg, #0f9ac7, #0ea5b8);
          box-shadow: 0 2px 8px -2px rgba(6, 148, 168, 0.5);
        }
      }

      @media (min-width: 640px) and (max-width: 767px) {
        .nav-button {
          padding: 0.625rem 0.5rem;
          font-size: 0.6875rem;
          min-height: 3.5rem;
        }

        .nav-button svg {
          width: 1.125rem;
          height: 1.125rem;
        }

        .nav-button span {
          font-size: 0.6875rem;
        }
      }

      @media (min-width: 768px) {
        .fixed.bottom-0 .px-8 {
          max-width: 1200px;
          margin: 0 auto;
        }

        [data-role="nav-buttons"] {
          grid-template-columns: repeat(4, 1fr);
          gap: 0.375rem;
          padding: 0.375rem;
          max-width: 600px;
          margin: 0 auto;
        }

        .nav-button {
          padding: 0.75rem 0.5rem;
          font-size: 0.75rem;
          flex-direction: column;
          gap: 0.25rem;
          min-height: 4rem;
        }

        .nav-button svg {
          width: 1.25rem;
          height: 1.25rem;
        }

        .nav-button span {
          font-size: 0.75rem;
          line-height: 1.1;
          font-weight: 500;
        }
      }

      @media (min-width: 1024px) {
        [data-role="nav-buttons"] {
          display: flex;
          flex-direction: row;
          gap: 0.25rem;
          padding: 0.375rem;
          overflow-x: auto;
          max-width: 800px;
          margin: 0 auto;
          justify-content: center;
        }

        .nav-button {
          padding: 0.75rem 1.25rem;
          font-size: 0.9375rem;
          flex-direction: row;
          gap: 0.65rem;
          min-height: auto;
          flex: 0 0 auto;
          white-space: nowrap;
          background: rgba(255, 255, 255, 0.95);
        }

        .nav-button svg {
          width: 1.25rem;
          height: 1.25rem;
        }

        .nav-button span {
          font-size: 0.9375rem;
          line-height: 1.2;
          font-weight: 600;
        }
      }

      @media (min-width: 1280px) {
        .nav-button {
          padding: 0.875rem 1.5rem;
          font-size: 1rem;
        }

        [data-role="nav-buttons"] {
          max-width: 900px;
        }
      }

    </style>
  </head>
  <body class="antialiased">
    <div class="flex min-h-screen flex-col bg-slate-50 text-slate-900">
      <!-- User Info Bar -->
      <div class="bg-white border-b border-slate-200/50">
        <div class="px-4 py-3 sm:px-6 sm:py-4 lg:px-8">
          <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div class="flex items-center gap-3">
              <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-cyan-500 to-emerald-500 text-white shadow-lg">
                <svg viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5">
                  <path
                    d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                  />
                </svg>
              </div>
              <div>
                <h1 class="text-lg font-semibold text-slate-900" data-role="user-greeting">
                  Your workspace
                </h1>
                <p class="text-sm text-slate-600" data-role="user-email"></p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <a
                href="../index.html"
                class="inline-flex items-center justify-center rounded-lg border border-slate-200 px-3 py-2 text-sm font-semibold text-slate-600 hover:border-cyan-200 hover:text-cyan-700"
              >
                Homepage
              </a>
              <button
                type="button"
                class="inline-flex items-center justify-center rounded-lg bg-slate-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800"
                data-role="logout"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </div>

      <main class="flex-1 overflow-y-auto pb-20">
          <div class="mx-auto w-full max-w-5xl px-4 py-8 sm:px-6 lg:px-8">
            <div
              class="mb-6 hidden rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700"
              role="status"
              data-role="toast"
            ></div>

            <div
              data-role="payment-gate"
              class="hidden rounded-3xl border border-cyan-200 bg-cyan-50/80 p-6 text-slate-700 shadow-sm"
            >
              <span class="stat-chip" data-role="gated-badge">Activate plan</span>
              <h2 class="mt-3 text-2xl font-semibold text-slate-900" data-role="gated-title">
                Almost there—finish activating your plan
              </h2>
              <p class="mt-2 text-sm leading-relaxed text-slate-600" data-role="gated-body">
                We saved your selection. Complete payment to unlock your personalised drills.
              </p>
              <div class="mt-5 flex flex-wrap items-center gap-3">
                <a
                  href="resume-registration.html"
                  data-role="gated-action"
                  class="inline-flex items-center justify-center rounded-xl bg-cyan-600 px-4 py-2.5 text-sm font-semibold text-white shadow hover:bg-cyan-700"
                >
                  Finish payment
                </a>
                <button
                  type="button"
                  data-nav-target="plan"
                  class="inline-flex items-center justify-center rounded-xl border border-cyan-200 px-4 py-2.5 text-sm font-semibold text-cyan-700 hover:border-cyan-300 hover:text-cyan-800"
                >
                  View plan details
                </button>
              </div>
            </div>

            <section data-view="dashboard" class="space-y-8">
              <div data-role="dashboard-content" class="space-y-8">
                <section class="rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm sm:p-8">
                  <div class="flex flex-col gap-8 lg:flex-row lg:items-start lg:justify-between">
                    <div class="space-y-5 lg:max-w-xl">
                      <span class="stat-chip">Today's focus</span>
                      <div>
                        <h2 class="text-3xl font-bold text-slate-900 sm:text-4xl" data-role="hero-name">
                          Ready to crush today's goals
                        </h2>
                        <p class="mt-3 text-sm text-slate-600" data-role="hero-plan-headline">
                          We’ll guide you through the exact questions you need to stay exam-ready.
                        </p>
                      </div>
                      <div class="grid grid-cols-2 gap-3 sm:grid-cols-4">
                        <article class="rounded-2xl border border-slate-100 bg-slate-50/70 p-4 text-center">
                          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Status</p>
                          <p class="mt-2 text-lg font-semibold text-slate-900" data-role="stat-status">—</p>
                        </article>
                        <article class="rounded-2xl border border-slate-100 bg-slate-50/70 p-4 text-center">
                          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Progress</p>
                          <p class="mt-2 text-lg font-semibold text-slate-900" data-role="stat-progress">—</p>
                        </article>
                        <article class="rounded-2xl border border-slate-100 bg-slate-50/70 p-4 text-center">
                          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Score</p>
                          <p class="mt-2 text-lg font-semibold text-slate-900" data-role="stat-score">—</p>
                        </article>
                        <article class="rounded-2xl border border-slate-100 bg-slate-50/70 p-4 text-center">
                          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Streak</p>
                          <p class="mt-2 text-lg font-semibold text-slate-900" data-role="stat-streak">—</p>
                        </article>
                      </div>
                    </div>
                    <div class="flex w-full flex-col gap-4 rounded-2xl border border-slate-200/60 bg-white p-5 shadow-sm lg:max-w-sm">
                      <div class="flex items-center justify-between text-sm font-semibold text-slate-600">
                        <span>Plan progress</span>
                        <span class="text-cyan-600" data-role="hero-days-remaining">Keep going!</span>
                      </div>
                      <div class="h-2.5 w-full overflow-hidden rounded-full bg-slate-100">
                        <div
                          class="h-full rounded-full bg-gradient-to-r from-cyan-500 via-cyan-600 to-emerald-500 transition-all duration-700"
                          style="width: 0%"
                          data-role="hero-progress-bar"
                        ></div>
                      </div>
                      <p class="text-xs text-slate-500" data-role="hero-progress-label">
                        We'll update this as you work through today's session.
                      </p>
                    </div>
                  </div>
                </section>

                <section class="grid gap-6 lg:grid-cols-[minmax(0,1.6fr)_minmax(0,1fr)]">
                  <article class="card p-6 sm:p-7">
                    <div class="flex items-center justify-between gap-3">
                      <div>
                        <h3 class="text-xl font-semibold text-slate-900" data-role="quiz-title">
                          Today's personalised drill
                        </h3>
                        <p class="mt-1 text-sm text-slate-600" data-role="quiz-subtitle">
                          Stay consistent—complete this session to keep your streak alive.
                        </p>
                      </div>
                      <span class="rounded-full border border-cyan-200 bg-cyan-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-cyan-700" data-role="quiz-timer">
                        <span data-role="quiz-timer-value">—</span>
                      </span>
                    </div>
                    <ul class="mt-5 space-y-3 text-sm text-slate-600" data-role="questions"></ul>
                    <div class="mt-6 flex flex-wrap items-center gap-3">
                      <button
                        type="button"
                        class="inline-flex items-center justify-center rounded-xl bg-cyan-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-cyan-700"
                        data-role="resume-quiz"
                      >
                        Start / resume session
                      </button>
                      <button
                        type="button"
                        class="inline-flex items-center justify-center rounded-xl border border-slate-200 px-4 py-2.5 text-sm font-semibold text-slate-600 hover:border-cyan-200 hover:text-cyan-700"
                        data-role="regenerate-quiz"
                      >
                        Regenerate session
                      </button>
                    </div>
                    <div
                      class="mt-6 hidden rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700"
                      data-role="completion-banner"
                    ></div>
                  </article>

                  <article class="card flex flex-col gap-4 border-cyan-100 bg-cyan-50/60 p-6 text-slate-700" data-role="schedule-notice">
                    <span class="stat-chip w-fit bg-white/70 text-cyan-700">
                      Schedule insight
                    </span>
                    <div>
                      <h3 class="text-lg font-semibold text-slate-900" data-role="schedule-notice-title">
                        Waiting for your first session
                      </h3>
                      <p class="mt-1 text-sm leading-relaxed" data-role="schedule-notice-headline">
                        You’ll see guidance here once we know your study rhythm.
                      </p>
                      <p class="mt-2 text-sm text-slate-500" data-role="schedule-notice-detail"></p>
                    </div>
                    <p class="mt-auto text-xs font-medium uppercase tracking-[0.3em] text-slate-500" data-role="schedule-notice-meta"></p>
                  </article>
                </section>

                <section class="rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm sm:p-8">
                  <div class="flex flex-wrap items-center justify-between gap-3">
                    <div>
                      <h3 class="text-xl font-semibold text-slate-900">Recent activity</h3>
                      <p class="text-sm text-slate-600">Track how your sessions are trending over time.</p>
                    </div>
                    <p class="text-xs font-semibold uppercase tracking-[0.32em] text-slate-400" data-role="history-summary">
                      —
                    </p>
                  </div>
                  <div class="mt-6 space-y-4" data-role="history-cards"></div>
                  <div class="mt-6 overflow-x-auto">
                    <table class="min-w-full divide-y divide-slate-200 text-sm">
                      <thead>
                        <tr class="text-left text-xs font-semibold uppercase tracking-wide text-slate-500">
                          <th class="px-3 py-2">Session</th>
                          <th class="px-3 py-2">Score</th>
                          <th class="px-3 py-2">Questions</th>
                          <th class="px-3 py-2">Duration</th>
                          <th class="px-3 py-2">Completed</th>
                        </tr>
                      </thead>
                      <tbody class="divide-y divide-slate-100" data-role="history-body"></tbody>
                    </table>
                  </div>
                </section>
              </div>
            </section>

            <section data-view="plan" class="hidden space-y-6">
              <header class="space-y-2">
                <h2 class="text-2xl font-semibold text-slate-900" data-role="plan-heading">Your study plan</h2>
                <p class="text-sm text-slate-600" data-role="plan-subheading">
                  We’ll surface the plan we’re actively scheduling for you here.
                </p>
              </header>
              <div class="rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm sm:p-7" data-role="subscription-card"></div>
              <div class="flex flex-wrap items-center gap-3">
                <button
                  type="button"
                  class="inline-flex items-center justify-center rounded-xl border border-slate-200 px-4 py-2.5 text-sm font-semibold text-slate-600 hover:border-cyan-200 hover:text-cyan-700"
                  data-role="plan-browse"
                >
                  Browse other plans
                </button>
              </div>
              <div class="grid gap-4" data-role="plan-collection"></div>
            </section>

            <section data-view="bonus" class="hidden space-y-6">
              <header class="space-y-2">
                <h2 class="text-2xl font-semibold text-slate-900">Bonus question sets</h2>
                <p class="text-sm text-slate-600">
                  Explore extra practice curated for live classes, mock exams, and advanced drills.
                </p>
              </header>
              <div class="space-y-4" data-role="extra-sets-section">
                <div class="grid gap-4 md:grid-cols-2" data-role="extra-sets-list"></div>
              </div>
            </section>

            <section data-view="profile" class="hidden space-y-6">
              <header class="space-y-2">
                <h2 class="text-2xl font-semibold text-slate-900">Profile & security</h2>
                <p class="text-sm text-slate-600">
                  Update the basics and keep your password fresh. Email changes are handled by support.
                </p>
              </header>
              <div class="rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm sm:p-8">
                <form class="space-y-5" data-role="profile-form">
                  <div class="space-y-1">
                    <label class="text-sm font-semibold text-slate-600" for="profile-name">Full name</label>
                    <input
                      id="profile-name"
                      type="text"
                      required
                      data-role="profile-name"
                      class="w-full rounded-xl border border-slate-200 bg-white px-3.5 py-2.5 text-sm text-slate-800 shadow-sm focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-100"
                    />
                  </div>
                  <div class="space-y-1">
                    <label class="text-sm font-semibold text-slate-600" for="profile-phone">Phone number</label>
                    <input
                      id="profile-phone"
                      type="tel"
                      placeholder="e.g. 0803 123 4567"
                      data-role="profile-phone"
                      class="w-full rounded-xl border border-slate-200 bg-white px-3.5 py-2.5 text-sm text-slate-800 shadow-sm focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-100"
                    />
                  </div>
                  <div class="space-y-1">
                    <label class="text-sm font-semibold text-slate-600">Email</label>
                    <div class="rounded-xl border border-slate-200 bg-slate-50 px-3.5 py-2.5 text-sm text-slate-500" data-role="profile-email">
                      —
                    </div>
                  </div>
                  <div class="grid gap-4 sm:grid-cols-2">
                    <div class="space-y-1">
                      <label class="text-sm font-semibold text-slate-600" for="profile-password">New password</label>
                      <input
                        id="profile-password"
                        type="password"
                        minlength="8"
                        placeholder="Leave blank to keep current"
                        data-role="profile-password"
                        class="w-full rounded-xl border border-slate-200 bg-white px-3.5 py-2.5 text-sm text-slate-800 shadow-sm focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-100"
                      />
                    </div>
                    <div class="space-y-1">
                      <label class="text-sm font-semibold text-slate-600" for="profile-password-confirm">Confirm password</label>
                      <input
                        id="profile-password-confirm"
                        type="password"
                        minlength="8"
                        placeholder="Repeat new password"
                        data-role="profile-password-confirm"
                        class="w-full rounded-xl border border-slate-200 bg-white px-3.5 py-2.5 text-sm text-slate-800 shadow-sm focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-100"
                      />
                    </div>
                  </div>
                  <div
                    class="hidden rounded-xl border px-3.5 py-2.5 text-sm"
                    data-role="profile-feedback"
                  ></div>
                  <div class="flex flex-wrap items-center gap-3">
                    <button
                      type="submit"
                      class="inline-flex items-center justify-center rounded-xl bg-cyan-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-cyan-700"
                    >
                      Save changes
                    </button>
                    <a
                      href="reset-password.html"
                      class="text-sm font-semibold text-cyan-700 hover:text-cyan-600"
                    >
                      Forgot password?
                    </a>
                  </div>
                </form>
              </div>
            </section>
          </div>
        </main>

      <!-- Bottom Navigation Bar -->
      <div class="fixed bottom-0 left-0 right-0 z-50 border-t border-slate-200/70 bg-white/95 backdrop-blur-md">
        <div class="px-4 py-2 sm:px-6 sm:py-3 lg:px-8">
          <div
            class="grid grid-cols-4 gap-1 rounded-2xl border border-slate-200 bg-white/80 p-1 overflow-hidden shadow-lg"
            data-role="nav-buttons"
          >
            <button type="button" data-nav-target="dashboard" class="nav-button nav-button--active" aria-current="page">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7m-9 9V9a2 2 0 012-2h4a2 2 0 012 2v10" />
              </svg>
              <span>Dashboard</span>
            </button>
            <button type="button" data-nav-target="plan" class="nav-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 6h14M5 12h14M5 18h7" />
              </svg>
              <span>Plan</span>
            </button>
            <button type="button" data-nav-target="bonus" data-nav-requires-active="true" class="nav-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c1.656 0 3-.895 3-2s-1.344-2-3-2-3 .895-3 2 1.344 2 3 2zM6 22h12M5 20l2-6h10l2 6" />
              </svg>
              <span>Bonus</span>
            </button>
            <button type="button" data-nav-target="profile" class="nav-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 10-6 0 3 3 0 006 0zM5 20a7 7 0 0114 0" />
              </svg>
              <span>Profile</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      window.__SUPABASE_CONFIG__ = window.__SUPABASE_CONFIG__ || {
        url: 'https://ghnhfagydcynhkgbazbj.supabase.co',
        anonKey:
          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdobmhmYWd5ZGN5bmhrZ2JhemJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwMDM2MjQsImV4cCI6MjA3NDU3OTYyNH0.KHgZ_ESTneR0CqWBGfu-JOmI3eBBLCZr1XG-g2vpclw',
      };
    </script>
    <script type="module" src="./src/dashboard.js"></script>
    <script type="module" src="src/pwa-bootstrap.js"></script>
  </body>
</html>
