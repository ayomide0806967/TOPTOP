<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Validation Messages</title>
    <link rel="stylesheet" href="apps/assets/tailwind.css" />
  </head>
  <body class="bg-gray-100 p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
      <h1 class="text-2xl font-bold mb-6">Test Registration Validation</h1>

      <!-- Test Buttons -->
      <div class="space-y-3 mb-8">
        <button
          onclick="testEmailError()"
          class="w-full bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
        >
          Test: Email Already Exists (Active)
        </button>
        <button
          onclick="testPhoneError()"
          class="w-full bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600"
        >
          Test: Phone Already Exists
        </button>
        <button
          onclick="testPendingEmail()"
          class="w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"
        >
          Test: Email Pending (Reuse)
        </button>
        <button
          onclick="testInfoMessage()"
          class="w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
        >
          Test: Info Message
        </button>
        <button
          onclick="clearMessage()"
          class="w-full bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"
        >
          Clear Message
        </button>
      </div>

      <!-- Feedback Element (same as registration form) -->
      <div
        id="form-feedback"
        class="hidden rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700"
        role="alert"
      ></div>

      <!-- Form (for visual context) -->
      <form class="mt-6 space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Email</label>
          <input
            type="email"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2"
            placeholder="test@example.com"
          />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Phone</label>
          <input
            type="tel"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm px-3 py-2"
            placeholder="+234-xxx-xxxx"
          />
        </div>
        <button
          type="button"
          class="w-full bg-cyan-600 text-white px-4 py-3 rounded hover:bg-cyan-700"
        >
          Continue to payment
        </button>
      </form>

      <!-- Console Output -->
      <div
        class="mt-8 p-4 bg-gray-900 text-green-400 rounded font-mono text-xs"
      >
        <div class="font-bold mb-2">Console Output:</div>
        <div id="console-output"></div>
      </div>
    </div>

    <script>
      const feedbackEl = document.getElementById('form-feedback');
      const consoleOutput = document.getElementById('console-output');

      function log(message) {
        const timestamp = new Date().toLocaleTimeString();
        consoleOutput.innerHTML += `<div>[${timestamp}] ${message}</div>`;
        consoleOutput.scrollTop = consoleOutput.scrollHeight;
      }

      function showFeedback(message, type = 'error') {
        if (!feedbackEl) {
          log('‚ùå ERROR: feedbackEl not found!');
          return;
        }

        log(`üì¢ showFeedback called: type="${type}", message="${message}"`);

        // Use innerHTML to support links in error messages
        feedbackEl.innerHTML = message;
        feedbackEl.classList.remove('hidden');

        log('‚úÖ Removed "hidden" class');

        // Remove all color classes
        feedbackEl.classList.remove(
          'bg-green-50',
          'border-green-200',
          'text-green-700',
          'bg-red-50',
          'border-red-200',
          'text-red-700',
          'bg-blue-50',
          'border-blue-200',
          'text-blue-700'
        );

        // Apply appropriate color classes
        if (type === 'success') {
          feedbackEl.classList.add(
            'bg-green-50',
            'border-green-200',
            'text-green-700'
          );
          log('‚úÖ Applied SUCCESS styles');
        } else if (type === 'info') {
          feedbackEl.classList.add(
            'bg-blue-50',
            'border-blue-200',
            'text-blue-700'
          );
          log('‚úÖ Applied INFO styles');
        } else {
          feedbackEl.classList.add(
            'bg-red-50',
            'border-red-200',
            'text-red-700'
          );
          log('‚úÖ Applied ERROR styles');
        }

        // Scroll feedback into view
        feedbackEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        log('‚úÖ Scrolled into view');
      }

      function clearMessage() {
        if (!feedbackEl) return;
        feedbackEl.classList.add('hidden');
        feedbackEl.innerHTML = '';
        log('üßπ Cleared feedback');
        consoleOutput.innerHTML = '';
      }

      function testEmailError() {
        log('üß™ Testing: Email Already Exists');
        showFeedback(
          'This email already has an active subscription. Please <a href="login.html" class="font-semibold underline">login here</a> or use a different email address.',
          'error'
        );
      }

      function testPhoneError() {
        log('üß™ Testing: Phone Already Exists');
        showFeedback(
          'This phone number is already registered with an active subscription. Please use a different number.',
          'error'
        );
      }

      function testPendingEmail() {
        log('üß™ Testing: Email Pending (Reuse)');
        showFeedback(
          'We found your previous registration. Continuing where you left off...',
          'success'
        );
      }

      function testInfoMessage() {
        log('üß™ Testing: Info Message');
        showFeedback('Verifying email address...', 'info');
      }

      // Initial log
      log('‚úÖ Test page loaded successfully');
      log('üìç feedbackEl found: ' + (feedbackEl ? 'YES' : 'NO'));
    </script>
  </body>
</html>
